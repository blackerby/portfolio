<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Emacs Workflow # We&rsquo;ve run prep.sh (and with it, get_summaries.py), so now we&rsquo;ve got a directory full of text files to review. This is where GNU Emacs comes in.
Initially, I was doing all of this work on the command line, using iTerm2 on my Mac. I had a script that ran aspell on each text file before opening Neovim for each file for manual review. It worked fine, but it wasn&rsquo;t very flexible, and to be honest, I&rsquo;ve always wanted to become proficient in Emacs."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="4. Emacs Workflow"><meta property="og:description" content="Emacs Workflow # We&rsquo;ve run prep.sh (and with it, get_summaries.py), so now we&rsquo;ve got a directory full of text files to review. This is where GNU Emacs comes in.
Initially, I was doing all of this work on the command line, using iTerm2 on my Mac. I had a script that ran aspell on each text file before opening Neovim for each file for manual review. It worked fine, but it wasn&rsquo;t very flexible, and to be honest, I&rsquo;ve always wanted to become proficient in Emacs."><meta property="og:type" content="article"><meta property="og:url" content="https://blackerby.github.io/portfolio/docs/technology/metadata/2022-11-25-emacs-workflow/"><meta property="article:section" content="docs"><title>4. Emacs Workflow | Blackerby Portfolio</title><link rel=manifest href=/portfolio/manifest.json><link rel=icon href=/portfolio/favicon.png type=image/x-icon><link rel=stylesheet href=/portfolio/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/portfolio/flexsearch.min.js></script>
<script defer src=/portfolio/en.search.min.1d3fa4b5ead3a417683f527489fafc3507ace5dffe8634227e0a159983816ed5.js integrity="sha256-HT+kterTpBdoP1J0ifr8NQes5d/+hjQifgoVmYOBbtU=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/portfolio/><span>Blackerby Portfolio</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-426f539af5864fc342d2765a8b0cfb21 class=toggle>
<label for=section-426f539af5864fc342d2765a8b0cfb21 class="flex justify-between"><a href=/portfolio/docs/outcomes/>Outcomes</a></label><ul><li><a href=/portfolio/docs/outcomes/articulate/>Articulate</a><ul></ul></li><li><a href=/portfolio/docs/outcomes/evaluate/>Evaluate</a><ul></ul></li><li><a href=/portfolio/docs/outcomes/practice/>Practice</a><ul></ul></li><li><a href=/portfolio/docs/outcomes/use/>Use</a><ul></ul></li></ul></li><li><a href=/portfolio/docs/philosophy/>Philosophy</a></li><li><a href=/portfolio/docs/resume/>Resume</a></li><li><input type=checkbox id=section-39dce656b4d24db3501949b7edf5cb43 class=toggle checked>
<label for=section-39dce656b4d24db3501949b7edf5cb43 class="flex justify-between"><a role=button>Technology</a></label><ul><li><input type=checkbox id=section-6489aba0bc74aaff9b095a3c6e1e7697 class=toggle checked>
<label for=section-6489aba0bc74aaff9b095a3c6e1e7697 class="flex justify-between"><a role=button>Metadata Workflow Series</a></label><ul><li><a href=/portfolio/docs/technology/metadata/2022-11-22-llc-workflow/>1. A High Level Metadata Workflow Overview</a></li><li><a href=/portfolio/docs/technology/metadata/2022-11-23-prep/>2. prep.sh and mlr</a></li><li><a href=/portfolio/docs/technology/metadata/2022-11-24-get-summaries/>3. get_summaries.py</a></li><li><a href=/portfolio/docs/technology/metadata/2022-11-25-emacs-workflow/ class=active>4. Emacs Workflow</a></li><li><a href=/portfolio/docs/technology/metadata/2022-11-25-cleanup/>5. cleanup.sh</a></li><li><a href=/portfolio/docs/technology/metadata/2022-12-04-meta-data-sette/>6. (meta)data(sette)</a></li></ul></li><li><a href=/portfolio/docs/technology/2022-12-02-senate-topic-modeling/>Visualizing Topics of 74th Congress Senate Bills and Joint Resolutions</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/portfolio/svg/menu.svg class=book-icon alt=Menu></label>
<strong>4. Emacs Workflow</strong>
<label for=toc-control><img src=/portfolio/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#finding-the-directory>Finding the Directory</a></li><li><a href=#editing-the-files>Editing the Files</a></li><li><a href=#finalizing-the-spreadsheet-data>Finalizing the spreadsheet data</a></li><li><a href=#cleaning-up-and-next-steps>Cleaning up and next steps</a></li></ul></nav></aside></header><article class=markdown><h1 id=emacs-workflow>Emacs Workflow
<a class=anchor href=#emacs-workflow>#</a></h1><p>We&rsquo;ve run <a href=https://blackerby.github.io/2022/11/23/prep.html>prep.sh</a> (and with it, <a href=https://blackerby.github.io/2022/11/24/get-summaries.html>get_summaries.py</a>), so now we&rsquo;ve got a directory full of text files to review. This is where <a href=https://www.gnu.org/software/emacs/>GNU Emacs</a> comes in.</p><p>Initially, I was doing all of this work on the command line, using <a href=https://iterm2.com/>iTerm2</a> on my Mac. I had a <a href=https://github.com/blackerby/llc_pdf_etl_workflow/commit/9416a664bf2e1b946060c4e7a1110edaf75c4557#diff-946a9298fc35569de8840dcfaabf1ab6a8e6334318c81b9a0b0590c2fad56184>script</a> that ran <a href=http://aspell.net/>aspell</a> on each text file before opening <a href=https://neovim.io/>Neovim</a> for each file for manual review. It worked fine, but it wasn&rsquo;t very flexible, and to be honest, I&rsquo;ve always wanted to become proficient in Emacs. This project presented me with a great opportunity to it a daily driver.</p><p>In the interest of keeping this post shorter than the last one, I&rsquo;ll describe the workflow I landed on and not all the steps along the way.</p><h2 id=finding-the-directory>Finding the Directory
<a class=anchor href=#finding-the-directory>#</a></h2><p>Within Emacs, I use <code>C-x d</code> to navigate to the directory created by <code>prep.sh</code>, e.g., <code>74_2_199</code>. This opens <a href=https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html>Dired</a>, the Emacs Directory Editor, where I next run <code>dired-omit-mode</code> with <code>C-x M-o</code> to hide uninteresting files (e.g., backup files that end with <code>~</code> and <code>.bak</code>).</p><h2 id=editing-the-files>Editing the Files
<a class=anchor href=#editing-the-files>#</a></h2><p>Now, I use <code>n</code> and <code>p</code> to navigate between the listed files, hitting the enter key to open the file I&rsquo;d like to edit. Within each file, I run <code>M-x ispell</code> with aspell as the backend for some automated spell-checking. I remove any weird entities introduced by OCR fix up line and paragraph breaks.</p><p>There are two really important elements of this step:</p><ol><li>Enter metadata about bill actions besides introduction into the spreadsheet</li><li>Make sure the name of the file corresponds to the date of the latest action on the bill.</li></ol><p>Putting the data into Google Sheets is pretty straightforward, except for a couple of steps at the end of this element of the workflow that I&rsquo;ll detail later in the post.</p><p>If I need to edit the name of the file, I do this back in the Dired buffer using the <code>R</code> key, making sure to change the name in the spreadsheet as well.</p><h2 id=finalizing-the-spreadsheet-data>Finalizing the spreadsheet data
<a class=anchor href=#finalizing-the-spreadsheet-data>#</a></h2><p>Before wrapping up this element of the workflow, I do two things:</p><ol><li>I type the date into the spreadsheet as written in the original document, e.g., May 1, 1936, but I eventually reformat it into <a href=https://en.wikipedia.org/wiki/ISO_8601>ISO 8601</a> using <code>Format > Number</code> in Google Sheets for some easier processing in SQLite later in the workflow.</li><li>I fill down the <code>Session</code> column with the formula <code>=if(year(L2088)=1935, 1, 2)</code> (the L column is the <code>Action Date</code> column).</li></ol><h2 id=cleaning-up-and-next-steps>Cleaning up and next steps
<a class=anchor href=#cleaning-up-and-next-steps>#</a></h2><p>Finally within Emacs I run the script <code>cleanup.sh</code>, which will be explained in the next post, using the <code>M-x !</code> key with the argument <code>../cleanup.sh</code>.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#finding-the-directory>Finding the Directory</a></li><li><a href=#editing-the-files>Editing the Files</a></li><li><a href=#finalizing-the-spreadsheet-data>Finalizing the spreadsheet data</a></li><li><a href=#cleaning-up-and-next-steps>Cleaning up and next steps</a></li></ul></nav></div></aside></main></body></html>